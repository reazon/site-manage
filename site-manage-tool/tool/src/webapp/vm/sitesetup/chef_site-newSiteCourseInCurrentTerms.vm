##<!-- $Header: /cvs/sakai2/legacy/tools/src/webapp/vm/sitesetup/chef_site-newSiteCourse.vm,v 1.3 2005/05/25 17:42:01 gsilver.umich.edu Exp $ -->
<SCRIPT LANGUAGE=JAVASCRIPT>
<!-- hide from non-JS browsers
function toggle(toggleKey, begin, end) {
    var checkboxes = document.getElementsByName("providerCourseAdd");
    for (i=begin; i<end; i++){
        if (checkboxes[toggleKey].checked){
           checkboxes[i].checked = true;
        }
	else{
           checkboxes[i].checked = false;
	}
    }
}

// -->
</SCRIPT>

<div class="portletBody">
	<h3>$tlang.getString("nscourse.creating")</h3>
	<p class="step">
		$tlang.getString("nscourse.choose")
	</p>

	#if ($alertMessage)<div class="alertMessage">$tlang.getString("gen.alert") $validator.escapeHtml($alertMessage)</div>#end
	<p class="instruction">
		$tlang.getString("nscourse.select")
	</p>
	<form name = "addCourseForm" method="post" action="#toolForm($action)">
		<h4>		
			$tlang.getString("nscourse.cinfo")
		</h4>	

		#foreach($termSectionObject in $providerCourseList)
			#if ($termSectionObject.getSectionObjectList().size()>0)
				<h5>
					<span class="reqStar">*</span> $tlang.getString("nscourse.acad")
					$termSectionObject.termTitle
				</h5>
			#end
			## display only subject, course number and section
			##and finally - the labels work, but having commas in the id does not validate. Can we concatenate or replace with underscore? Here is reqs on ids and labels: an id attribute value must begin with a letter (A-Z or a-z) and consist of the following characters: (A-Z), (a-z), (0-9), hyphens (-), underscores (_), colons (:), and periods (.).
			#set($courseNumber=0)	
			#foreach($sectionObject in $termSectionObject.sectionObjectList)
				#set($courseNumber = $courseNumber + 1)
				#set($toggleKey = $courseNumber - 1) 
				#set($endKey = $courseNumber + $sectionObject.getOtherSections().size())
				<p class="checkbox">
				<input type="checkbox" name="providerCourseAdd" value="$sectionObject.eid" id="course$courseNumber" onclick="toggle($toggleKey, $courseNumber, $endKey);"
					#if ($!selectedProviderCourse.contains("$sectionObject.eid"))
						checked="checked"
					#end 
					/> 
				<label for="course$courseNumber">
					$validator.escapeHtml($sectionObject.eid) : $sectionObject.title, $sectionObject.categoryDescription</label></p>
				#foreach($section in $sectionObject.otherSections)
		 			#set($courseNumber=$courseNumber + 1)
                               	         <p class="checkbox">
					 &nbsp; &nbsp;
					 <input type="checkbox" name="providerCourseAdd" value="$section.eid" id="course$courseNumber"
						#if ($!selectedProviderCourse.contains("$section.eid"))
							checked="checked"
						#end 
					/>
       	                                $section.eid : $section.title, $section.categoryDescription
				#end
			#end
		#end
		## instructor could choose to go to the manual creation page
		<p class="checkbox">
			<input  type="checkbox" name="manualAdds" value="manual add" id="manual_add" #if ($!selectedManualCourse) checked="checked" #end/>
			#if ($!providerCourseList.size() != 0 || $!requestedCourseList.size() != 0)
				<label for = "manual_add">$tlang.getString("nscourse.iwould1") </label>
			#else
				<label for = "manual_add">$tlang.getString("nscourse.iwould2") </label>
			#end
		</p>

		<input id="index" type="hidden" name="template-index" value="36" />
		<input type="hidden" name="back" value="1" />
		<p class="act">
			<input id="continueButton" type="submit" class="active" accesskey="s" name="eventSubmit_doContinue" value="$tlang.getString('gen.continue')" />
			<input type="submit" accesskey="b" name="eventSubmit_doBack" value="$tlang.getString('gen.back')" />
			<input type="submit" accesskey="x" name="eventSubmit_doCancel" value="$tlang.getString('gen.cancel')" />
		</p>

	</form>
</div>
