##<!-- $Header: /cvs/sakai2/legacy/tools/src/webapp/vm/prefs/chef_membership.vm,v 1.10 2005/05/28 03:04:36 ggolden.umich.edu Exp $ -->
<div class="portletBody">
	<ul class="navIntraTool actionToolbar" role="menu">
	<li class="firstToolBarItem" role="menuitem" aria-disabled="true"><span class="current">$tlang.getString("mb.cursit")</span></li>
	<li role="menuitem"><span><a href="#toolLink("$action" "doGoto_joinable")" title="$tlang.getString('mb.joisit')">$tlang.getString('mb.joisit')</a></span></li>
</ul>
	
	<h3>
		$tlang.getString("mb.cursit") 
	</h3>                                                                                           

	#if ($alertMessage)<p class="information">$validator.escapeHtml($alertMessage)</p>#end
	
	#if ($unjoinableSites.size()>0)
		
		<p class="instruction">
		$tlang.getString("mb.listunjoin")
		</p>
		
		<div class="navPanel">
		<div class="listNav">
				<div class="instruction">
					$tlang.getString("mb.list.viewing") $topMsgPos - $btmMsgPos $tlang.getString("mb.list.of") $allMsgNumber $tlang.getString("mb.list.sites")
				</div>
				<div class="innerPannel">
					#if ($pagesize != 0)
						#if ($goPPButton == "true")
							<form name="firstpageForm" class="inlineForm" method="post" action="#toolForm("$action")">
								<input type="submit" name="eventSubmit_doList_first" value="|&lt;" title="$tlang.getString("mb.list.pager.first")" />
							</form>
						#else
							<form name="firstpageForm" class="inlineForm" method="post" action="#toolForm("$action")">
								<input type="submit" name="eventSubmit_doList_first" value="|&lt;" disabled="disabled" />
							</form>
						#end
						#if ($goPPButton == "true")
						<form name="nextpageForm" class="inlineForm" method="post" action="#toolForm("$action")">
								<input type="submit" name="eventSubmit_doList_prev" value="&lt;" title="$tlang.getString("mb.list.pager.prev") $pagesize"  accesskey="p" />
							</form>
						#else
							<form name="nextpageForm" class="inlineForm" method="post" action="#toolForm("$action")">
								<input type="submit" name="eventSubmit_doList_prev" value="&lt;" disabled="disabled" />
							</form>
						#end
					#end
					<form name="pagesizeForm" class="inlineForm" method="post" action="#toolForm("$action")">
						<input type="hidden" name="eventSubmit_doChange_pagesize" value="changepagesize" />
						<label class="skip" for="pagerSelect">$tlang.getString("mb.list.select")</label>
						<select name="selectPageSize" onchange="blur();document.pagesizeForm.submit();" id="pagerSelect">
						<option value="5" #if($pagesize == 5) selected="selected" #end>$tlang.getString("mb.list.pager.show5")</option>
							<option value="10" #if($pagesize == 10) selected="selected" #end>$tlang.getString("mb.list.pager.show10")</option>
							<option value="20" #if($pagesize == 20) selected="selected" #end>$tlang.getString("mb.list.pager.show20")</option>
							<option value="50" #if($pagesize == 50) selected="selected" #end>$tlang.getString("mb.list.pager.show50")</option>
							<option value="100" #if($pagesize == 100) selected="selected" #end>$tlang.getString("mb.list.pager.show100")</option>
							<option value="200" #if($pagesize == 200) selected="selected" #end>$tlang.getString("mb.list.pager.show200")</option>
						</select>
					</form>
					#if ($pagesize != 0)
						#if ($goNPButton == "true")
							<form name="nextpageForm" class="inlineForm" method="post" action="#toolForm("$action")">
								<input type="submit" name="eventSubmit_doList_next" value="&gt;" title="$tlang.getString("mb.list.pager.next") $pagesize"  accesskey="n" />
							</form>
						#else
							<form name="nextpageForm" class="inlineForm" method="post" action="#toolForm("$action")">
								<input type="submit" name="eventSubmit_doList_next" value="&gt;" disabled="disabled" />
							</form>
						#end
						#if ($goNPButton == "true")
							<form name="lastpageForm" class="inlineForm" method="post" action="#toolForm("$action")">
								<input type="submit" name="eventSubmit_doList_last" value="&gt;|" title="$tlang.getString("mb.list.pager.last")" />
							</form>
						#else
							<form name="lastpageForm" class="inlineForm" method="post" action="#toolForm("$action")">
								<input type="submit" name="eventSubmit_doList_last" value="&gt;|" disabled="disabled" />
							</form>
	
						#end
					#end
				</div>
			</div>
		</div>	
		
		<form action="#toolForm("$action")" method="post">
			<table class = "listHier lines" cellspacing="0" summary ="$tlang.getString('joinable.list.summary')">
				<tr>
					<th id="worksite">
						<a href="#toolLink("$action" "doToggle_sort")" title ="$tlang.getString('list.sortbytitle')"> 
							$tlang.getString("gen.worksite")
							#if ($currentSortAsc) 
								<img src = "#imageLink("sakai/sortascending.gif")" border="0" title ="$tlang.getString('list.stasc')" alt ="$tlang.getString('list.stasc')" /> 
							#else 
								<img src = "#imageLink("sakai/sortdescending.gif")" border="0" title ="$tlang.getString('list.stdesc')" alt ="$tlang.getString('list.stdesc')" /> 
							#end
						</a>
					</th>
					<th id="description">$tlang.getString("gen.description")</th>
				</tr>
				#foreach ($site in $unjoinableSites)
					<tr>
						<td headers="worksite" style="white-space:nowrap">
							<h4><a href="$site.Url" target="_top" title="$tlang.getString('mb.gotosite') $validator.escapeHtml($site.Title)">$validator.escapeHtml($site.Title)</a></h4>
							#set($siteType=$site.Type)
							## don't show unjoin link if (1) unjoin is disabled for all sites; (2) unjoin is disabled for current site type
							#if($disableUnjoinSelection || ($!siteType && $!disableUnjoinSiteTypes.contains($!siteType)))
								<p class ="shorttext"></p>
							#else		
								#if ($SiteService.allowUnjoinSite($site.Id))
									<div class="itemAction">
										<a href="#toolLinkParam("$action" "doGoto_unjoinconfirm" "itemReference=$validator.escapeUrl($site.Id)")" title="$tlang.getString('mb.unjoinsite') $validator.escapeHtml($site.Title)">$tlang.getString('mb.unjoin')</a>
									</div>	
								#end
							#end
						</td>
						<td headers="description">
							$!site.Description
						</td>
					</tr>
				#end
			</table>
		</form>
	#else
		<p class="instruction">$tlang.getString('mb.list.nomembs')</p>
	#end
</div>	

